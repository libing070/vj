(function(e){function t(t){for(var o,r,s=t[0],l=t[1],c=t[2],u=0,p=[];u<s.length;u++)r=s[u],n[r]&&p.push(n[r][0]),n[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],o=!0,s=1;s<i.length;s++){var l=i[s];0!==n[l]&&(o=!1)}o&&(a.splice(t--,1),e=r(r.s=i[0]))}return e}var o={},n={fileModelConfig:0},a=[];function r(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=o,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/cmca/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("fe99")},"1b48":function(e,t,i){},"233e":function(e,t,i){"use strict";var o=i("a355"),n=i.n(o);n.a},"26ec":function(e,t,i){},"2a34":function(e,t,i){},"2b22":function(e,t,i){},"34d2":function(e,t,i){},"3cc9":function(e,t,i){},5414:function(e,t,i){},"6f88":function(e,t,i){"use strict";var o=i("6fe6"),n=i.n(o);n.a},"6fe6":function(e,t,i){},"70a0":function(e,t,i){"use strict";var o=i("34d2"),n=i.n(o);n.a},"7dd0":function(e,t,i){},"8f07":function(e,t,i){"use strict";var o=i("c336"),n=i.n(o);n.a},a355:function(e,t,i){},b272:function(e,t,i){"use strict";var o=i("2b22"),n=i.n(o);n.a},b51b:function(e,t,i){},c336:function(e,t,i){},ceec:function(e,t,i){"use strict";var o=i("2a34"),n=i.n(o);n.a},d233:function(e,t,i){"use strict";var o=i("b51b"),n=i.n(o);n.a},e945:function(e,t,i){"use strict";var o=i("26ec"),n=i.n(o);n.a},e9a3:function(e,t,i){"use strict";var o=i("1b48"),n=i.n(o);n.a},eb51:function(e,t,i){"use strict";var o=i("3cc9"),n=i.n(o);n.a},fe99:function(e,t,i){"use strict";i.r(t);i("3a0f"),i("a3a3"),i("4d0b");var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("the-layout",[i("div",{attrs:{slot:"main-container"},slot:"main-container"},[i("el-breadcrumb",{attrs:{separator:"\\"}},[i("el-breadcrumb-item",{staticClass:"breadcrumb-active"},[e._v("报告模板配置")]),i("el-breadcrumb-item",{class:{"breadcrumb-active":e.editContentVisible},nativeOn:{click:function(t){return e.hideEditContent(t)}}},[e._v("\n        "+e._s(e.activeTabName)+"\n      ")]),e.editContentVisible?i("el-breadcrumb-item",[e._v("模板编辑")]):e._e()],1),i("el-card",{staticClass:"main-body"},[i("main-tab",{directives:[{name:"show",rawName:"v-show",value:!e.editContentVisible,expression:"!editContentVisible"}]}),e.editContentVisible?i("main-edit"):e._e()],1)],1)])},n=[],a=i("efa4"),r=i("f2de"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("the-header"),i("div",{staticClass:"main-wrap clearfix"},[i("the-sidebar",{staticClass:"float-l"}),i("div",{staticClass:"main-container"},[e._t("main-container")],2)],1)],1)},l=[],c=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},d=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-header"},[i("h1",[e._v("数据审计平台")])])}],u={name:"TheHeader"},p=u,f=(i("eb51"),i("048f")),m=Object(f["a"])(p,c,d,!1,null,"0a3ba4f3",null);m.options.__file="TheHeader.vue";var h=m.exports,g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-sidebar"},[i("ul",{class:e.isCollapse?"collapse-sidebar sidebar-nav-list":"sidebar-nav-list"},e._l(e.navList,function(t,o){return i("li",{key:o,staticClass:"sidebar-nav-item"},[i("div",{staticClass:"sidebar-nav-sub-menu"},[i("a",{class:-1!==JSON.stringify(t).indexOf(e.ActivePage)?"active nav-item-icon":"nav-item-icon",attrs:{href:"javascript:;"},on:{mouseover:function(i){e.HoverSate(t.index)},mouseout:function(t){e.HoverSate(-1)},click:function(i){e.navRoute(t)}}},[i("span",{class:t.iconfont}),e.isCollapse?e._e():i("span",{staticClass:"nav-content"},[e._v(e._s(t.name))]),e.isCollapse?e._e():i("i",{staticClass:"iconfont icon-point float-r"})]),i("transition",{attrs:{name:"fade"}},[e.isCollapse?i("a",{directives:[{name:"show",rawName:"v-show",value:e.hoverActiveIndex===t.index,expression:"hoverActiveIndex === lv1item.index"}],staticClass:"nav-item-tip",attrs:{href:"javascript:;"}},[i("i",{staticClass:"iconfont icon-point"}),e._v(e._s(t.name)+"\n          ")]):e._e()])],1),i("el-collapse-transition",[t.child?i("ul",{directives:[{name:"show",rawName:"v-show",value:-1!==JSON.stringify(t).indexOf(e.ActivePage),expression:"JSON.stringify(lv1item).indexOf(ActivePage) !== -1"}]},e._l(t.child,function(t,o){return i("li",{key:o,staticClass:"sidebar-nav-item"},[i("div",{staticClass:"sidebar-nav-child-menu"},[i("a",{class:e.nowPage===t.index?"active nav-item-icon":"nav-item-icon",attrs:{href:"javascript:;"},on:{mouseover:function(i){e.HoverSate(t.index)},mouseout:function(t){e.HoverSate(-1)},click:function(i){e.navRoute(t)}}},[e.isCollapse?i("span",{class:t.iconfont}):i("span",{staticClass:"nav-content"},[e._v(e._s(t.name))])]),i("transition",{attrs:{name:"fade"}},[e.isCollapse?i("a",{directives:[{name:"show",rawName:"v-show",value:e.hoverActiveIndex===t.index,expression:"hoverActiveIndex === item.index"}],staticClass:"nav-item-tip",attrs:{href:"javascript:;"}},[i("i",{staticClass:"iconfont icon-point"}),e._v(e._s(t.name)+"\n                ")]):e._e()])],1)])})):e._e()])],1)}))])},b=[],v={computed:Object(a["a"])({},Object(r["c"])({roleId:function(e){return e.roleId},xqglAuthStatus:function(e){return e.xqglAuthStatus},sjbgysAuthStatus:function(e){return e.sjbgysAuthStatus},rightControl:function(e){return e.rightControl}})),methods:Object(a["a"])({},Object(r["b"])(["initRoleId","initXqglAuthStatus","initSjbgysAuthStatus","initRightControl"]),{getRightControl:function(){var e=this;this.$api.getLoginRole().then(function(t){e.initRoleId(t.roleId)}).catch(function(t){e.$message.error(t)}),this.$api.getXqglControl().then(function(t){e.initXqglAuthStatus(t)}).catch(function(t){e.$message.error(t)}),this.$api.getSjbgysControl().then(function(t){e.initSjbgysAuthStatus(t)}).catch(function(t){e.$message.error(t)}),this.$api.getRightControl().then(function(t){var i={};t.qdyksjjg||t.qdykpmhz||t.qdykqtcd||t.qdykzgwz||t.qdykwjxz?i.yktlControl=!0:i.yktlControl=!1,t.zdtlsjjg||t.zdtlpmhz||t.zdtlqtcd||t.zdtlzgwz||t.zdtlwjxz?i.zdtlControl=!0:i.zdtlControl=!1,t.yjk_sjjg||t.yjk_pmhz||t.yjk_qtcd||t.yjk_zgwz||t.yjk_wjxz?i.yjkControl=!0:i.yjkControl=!1,t.khqfsjjg||t.khqfpmhz||t.khqfqtcd||t.khqfzgwz||t.khqfwjxz?i.khqfControl=!0:i.khqfControl=!1,t.ygycsjjg||t.ygycpmhz||t.ygycqtcd||t.ygyczgwz||t.ygycwjxz?i.ygycczControl=!0:i.ygycczControl=!1,t.dzqsjjg||t.dzqpmhz||t.dzqqtcd||t.dzqzgwz||t.dzqwjxz?i.dzqControl=!0:i.dzqControl=!1,t.llglsjjg||t.llglpmhz||t.llglqtcd||t.llglzgwz||t.llglwjxz?i.llglControl=!0:i.llglControl=!1,t.cxsjsjkg&&3!=e.roleId?i.sjkgControl=!0:i.sjkgControl=!1,t.cxsjcsgl?i.csglControl=!0:i.csglControl=!1,t.cxsjsjbg?i.sjbgControl=!0:i.sjbgControl=!1,t.cxsjsjjh?i.xqglControl=!0:i.xqglControl=!1,t.cxsjsjjh&&0!=e.sjbgysAuthStatus?i.sjbgysControl=!0:i.sjbgysControl=!1,t.cxsjqxcx?i.qxcxControl=!0:i.qxcxControl=!1,t.cxsjsjgj?i.sjgjControl=!0:i.sjgjControl=!1,t.cxsjrzcx?i.rzcxControl=!0:i.rzcxControl=!1,t.cxsjsjzl?i.sjzlglControl=!0:i.sjzlglControl=!1,t.cxsjsjrw?i.sjrwControl=!0:i.sjrwControl=!1,t.cxsjwtfk?i.wtfkControl=!0:i.wtfkControl=!1,t.cxsjsjtb?i.bgmbpzControl=!0:i.bgmbpzControl=!1,i.qfglControl=!0,i.zbglControl=!0,i.yxzyglControl=!0,i.kdglControl=!0,i.wlwglControl=!0,i.ykglControl=!0,e.initRightControl(i)}).catch(function(t){e.$message.error(t)})},navLocation:function(e,t){e?(sessionStorage.setItem("activePage",t),window.location.href="".concat("/"===this.$baseUrl?"/views/":this.$baseUrl).concat(t,"/index.html")):alert("暂无权限")}}),created:function(){this.getRightControl()}},w=v,y={name:"TheSidebar",mixins:[w],data:function(){return{navList:[{index:"home",iconfont:"iconfont icon-shouye",name:"首页"},{index:"sjzt",iconfont:"iconfont icon-shenjizhuanti",name:"审计专题",child:[{index:"yktl",iconfont:"iconfont icon-yangkataoli",name:"养卡套利"},{index:"zdtl",iconfont:"iconfont icon-zhongduantaol",name:"社会渠道终端套利"},{index:"yjk",iconfont:"iconfont icon-youjiaqia",name:"有价卡管理违规"},{index:"khqf",iconfont:"iconfont icon-kehuqianfei",name:"客户欠费"},{index:"ygyccz",iconfont:"iconfont icon-yuangongyichang",name:"员工异常业务操作"},{index:"dzqglwg",iconfont:"iconfont icon-dzqglwg",name:"电子券管理违规"},{index:"llglwg",iconfont:"iconfont icon-llglwg",name:"流量管理违规"}]},{index:"sjgj",iconfont:"iconfont icon-shenjigenjin",name:"审计跟进",child:[{index:"zgxx",iconfont:"iconfont icon-zhenggaixinxi",name:"整改信息"},{index:"wzxx",iconfont:"iconfont icon-wenzexinxi",name:"问责信息"}]},{index:"ywgl",iconfont:"iconfont icon-yewuguanli",name:"业务管理",child:[{index:"xqgl",iconfont:"iconfont icon-fabuxuqiu",name:"需求管理"},{index:"sjkg",iconfont:"iconfont icon-shenjikaiguan",name:"审计开关"},{index:"sjbg",iconfont:"iconfont icon-baogaoxaizai",name:"报告下载"},{index:"csgl",iconfont:"iconfont icon-canshuguanli",name:"参数管理"}]},{index:"fxjk",iconfont:"iconfont icon-yewugjianongjiyujing",name:"风险监控",child:[{index:"qfgl",iconfont:"iconfont icon-arrears-status",name:"欠费管理"},{index:"zbgl",iconfont:"iconfont icon-zhangben",name:"账本管理"},{index:"yxzygl",iconfont:"iconfont icon-canshuguanli",name:"营销资源管理"},{index:"kdgl",iconfont:"iconfont icon-kuandaitianchong",name:"宽带管理"},{index:"wlwgl",iconfont:"iconfont icon-iotwulianwang",name:"物联网管理"},{index:"ykgl",iconfont:"iconfont icon-ykgl",name:"养卡管理"}]},{index:"grgzq",iconfont:"iconfont icon-gerengongzuoqu",name:"个人工作区",child:[{index:"bgys",iconfont:"iconfont icon-shenjibaogaoyushen",name:"审计报告预审"},{index:"qxcx",iconfont:"iconfont icon-quanxianchaxun",name:"权限查询"},{index:"rzcx",iconfont:"iconfont icon-rizhi",name:"日志查询"},{index:"sjzlgl",iconfont:"iconfont icon-shujuzhiliang",name:"数据质量管理"},{index:"wtfk",iconfont:"iconfont icon-question-feedba",name:"问题反馈及报送"},{index:"sjrw",iconfont:"iconfont icon-gongrengongzuoqu",name:"审计任务管理"},{index:"fileModelConfig",iconfont:"iconfont icon-shujuzhiliang",name:"报告模板配置"}]}],hoverActiveIndex:-1,clientWidth:document.body.clientWidth,nowPage:sessionStorage.getItem("activePage"),ActivePage:sessionStorage.getItem("activePage"),isCollapse:Boolean}},computed:Object(r["c"])(["rightControl"]),methods:{HoverSate:function(e){this.hoverActiveIndex=e},navRoute:function(e){this.ActivePage=e.index;var t=e.index;if(!e.child&&this.nowPage!=t)switch(t){case"home":this.navLocation(!0,"home");break;case"yktl":this.navLocation(this.rightControl.yktlControl,"yktl");break;case"zdtl":this.navLocation(this.rightControl.zdtlControl,"zdtl");break;case"yjk":this.navLocation(this.rightControl.yjkControl,"yjk");break;case"khqf":this.navLocation(this.rightControl.khqfControl,"khqf");break;case"ygyccz":this.navLocation(this.rightControl.ygycczControl,"ygyccz");break;case"sjkg":this.navLocation(this.rightControl.sjkgControl,"sjkg");break;case"csgl":this.navLocation(this.rightControl.csglControl,"csgl");break;case"sjbg":this.navLocation(this.rightControl.sjbgControl,"sjbg");break;case"qfgl":this.navLocation(this.rightControl.qfglControl,"qfgl"),window.sessionStorage.setItem("domain1","lp1_qfgl"),window.sessionStorage.setItem("domain2","2khqkgl"),window.sessionStorage.setItem("mon","");break;case"zbgl":this.navLocation(this.rightControl.zbglControl,"zbgl"),window.sessionStorage.setItem("domain1","lp1_zbgl"),window.sessionStorage.setItem("domain2","2hfzs/tfgl"),window.sessionStorage.setItem("mon","");break;case"yxzygl":this.navLocation(this.rightControl.yxzyglControl,"yxzygl"),window.sessionStorage.setItem("domain1","lp1_yxzygl"),window.sessionStorage.setItem("domain2","2yjkgl"),window.sessionStorage.setItem("mon","");break;case"kdgl":this.navLocation(this.rightControl.kdglControl,"kdgl"),window.sessionStorage.setItem("domain1","lp1_kdgl"),window.sessionStorage.setItem("domain2","2jtkdgl"),window.sessionStorage.setItem("mon","");break;case"wlwgl":this.navLocation(this.rightControl.wlwglControl,"wlwgl"),window.sessionStorage.setItem("domain1","lp1_wlwgl"),window.sessionStorage.setItem("domain2","2wlkgl"),window.sessionStorage.setItem("mon","");break;case"ykgl":this.navLocation(this.rightControl.ykglControl,"ykgl"),window.sessionStorage.setItem("domain1","lp1_ykgl"),window.sessionStorage.setItem("domain2","2qdllyk"),window.sessionStorage.setItem("mon","");break;case"dzqglwg":this.navLocation(this.rightControl.dzqControl,"dzqglwg");break;case"llglwg":this.navLocation(this.rightControl.llglControl,"llglwg");break;case"xqgl":this.navLocation(this.rightControl.xqglControl,"xqgl");break;case"bgys":this.navLocation(this.rightControl.sjbgysControl,"sjbgys");break;case"qxcx":this.navLocation(this.rightControl.qxcxControl,"qxcx");break;case"wzxx":this.rightControl.sjgjControl?(sessionStorage.setItem("activePage",t),window.location.href="".concat("/"===this.$baseUrl?"/views/":this.$baseUrl,"sjgj/").concat(t,".html")):alert("暂无权限");break;case"zgxx":this.rightControl.sjgjControl?(sessionStorage.setItem("activePage",t),window.location.href="".concat("/"===this.$baseUrl?"/views/":this.$baseUrl,"sjgj/").concat(t,".html")):alert("暂无权限");break;case"rzcx":this.navLocation(this.rightControl.rzcxControl,"rzcx");break;case"sjzlgl":this.navLocation(this.rightControl.sjzlglControl,"sjzlgl");break;case"sjrw":this.navLocation(this.rightControl.sjrwControl,"sjrw");break;case"wtfk":this.navLocation(this.rightControl.wtfkControl,"wtfk");break;case"fileModelConfig":this.navLocation(this.rightControl.bgmbpzControl,"fileModelConfig");break;default:alert("该项目暂未上线");break}}},created:function(){this.clientWidth<=1366?this.isCollapse=!0:this.isCollapse=!1},mounted:function(){var e=this;window.addEventListener("resize",function(t){e.clientWidth=document.body.clientWidth,e.clientWidth<=1366?e.isCollapse=!0:e.isCollapse=!1})}},T=y,C=(i("ceec"),Object(f["a"])(T,g,b,!1,null,"18c93faa",null));C.options.__file="TheSidebar.vue";var x=C.exports,k={name:"TheLayout",components:{TheHeader:h,TheSidebar:x}},j=k,F=(i("8f07"),Object(f["a"])(j,s,l,!1,null,null,null));F.options.__file="TheLayout.vue";var I=F.exports,S=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main-content-tab"},[i("el-tabs",{style:{height:e.tabHeight+"px"},attrs:{"tab-position":"left",type:"border-card"},on:{"tab-click":e.changeTab},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[i("el-tab-pane",{attrs:{name:"Word"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont icon-dq-text"},[e._v(" ")]),e._v("文本类模板")]),e.WordTabVisiable?i("tab-content"):e._e()],1),i("el-tab-pane",{attrs:{name:"Excel"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont icon-baobiaobiaoweiguanli"},[e._v(" ")]),e._v("报表类模板")]),e.ExcelTabVisiable?i("tab-content"):e._e()],1)],1)],1)},O=[],D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main-tab-content"},[i("el-row",[i("el-col",{attrs:{span:20}},[i("el-form",{attrs:{inline:!0,model:e.searchForm,size:"mini"}},[i("el-form-item",{attrs:{label:"审计专题"}},[i("el-select",{attrs:{name:"subjectId"},model:{value:e.searchForm.subjectId,callback:function(t){e.$set(e.searchForm,"subjectId",t)},expression:"searchForm.subjectId"}},e._l(e.subjectList,function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),i("el-form-item",{attrs:{label:"模板类型"}},[i("el-select",{attrs:{placeholder:"模板类型",name:"modelTypeId"},model:{value:e.searchForm.modelTypeId,callback:function(t){e.$set(e.searchForm,"modelTypeId",t)},expression:"searchForm.modelTypeId"}},e._l(e.tplTypeList,function(e,t){return i("el-option",{key:t,attrs:{label:e.modelTypeName,value:e.modelTypeId}})}))],1)],1)],1),i("el-col",{staticClass:"clearfix",attrs:{span:4}},[i("div",{staticClass:"float-r"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onSearch}},[e._v("查询")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("导入")])],1)])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"数据加载中",data:e.tableData,height:e.tableHeight,stripe:""}},[i("el-table-column",{attrs:{prop:"modelTypeName",label:"模板类型",width:"180",align:"center"}}),i("el-table-column",{attrs:{prop:"versions",label:"模板版本",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-select",{attrs:{name:t.row.rowCode,size:"mini"},on:{change:function(i){e.switchVersion(t)}},model:{value:t.row.selected,callback:function(i){e.$set(t.row,"selected",i)},expression:"scope.row.selected"}},e._l(t.row.versionList,function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))]}}])}),i("el-table-column",{attrs:{prop:"isOfficial",label:"正式版本",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[e.row.isOfficial?i("i",{staticClass:"color-primary iconfont icon-shi"}):i("i",{staticClass:"color-primary iconfont icon-fou"})]}}])}),i("el-table-column",{attrs:{prop:"isDefault",label:"默认版本",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[e.row.isDefault?i("i",{staticClass:"color-primary iconfont icon-shi"}):i("i",{staticClass:"color-primary iconfont icon-fou"})]}}])}),i("el-table-column",{attrs:{prop:"reviser",label:"修改人",align:"center"}}),i("el-table-column",{attrs:{prop:"revisionTime",label:"修改时间",align:"center"}}),i("el-table-column",{attrs:{prop:"effectiveTime",label:"生效起始审计月",align:"center"}}),i("el-table-column",{attrs:{prop:"operate",label:"操作",width:"240",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"top"}},[i("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"mini",disabled:!t.row.selected},on:{click:function(i){e.eidtVersion(t)}}})],1),i("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top"}},[i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:!t.row.selected},on:{click:function(i){e.deleteVersion(t)}}})],1),i("el-tooltip",{attrs:{effect:"dark",content:"下载",placement:"top"}},[i("el-button",{attrs:{type:"success",icon:"el-icon-download",size:"mini",disabled:!t.row.selected},on:{click:function(i){e.downloadTpl(t)}}})],1),i("el-button",{attrs:{type:"primary",size:"mini",disabled:Boolean(t.row.isDefault)||!Boolean(t.row.isOfficial)||!t.row.selected},on:{click:function(i){e.setDefault(t)}}},[e._v("设为默认版本")])]}}])})],1),i("el-dialog",{attrs:{width:"30%",title:"导入模板","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.dialogFormVisible},on:{opened:function(t){e.resetForm("importForm")},"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"importForm",attrs:{size:"small",model:e.importForm,"label-width":"70px"}},[i("el-form-item",{attrs:{prop:"subjectId",label:"审计专题"}},[i("el-select",{model:{value:e.importForm.subjectId,callback:function(t){e.$set(e.importForm,"subjectId",t)},expression:"importForm.subjectId"}},e._l(e.subjectList,function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),i("el-form-item",{attrs:{prop:"modelTypeId",label:"模板类型"}},[i("el-select",{attrs:{disabled:e.importTplTypeDisabled},model:{value:e.importForm.modelTypeId,callback:function(t){e.$set(e.importForm,"modelTypeId",t)},expression:"importForm.modelTypeId"}},e._l(e.importTplTypeList,function(e,t){return i("el-option",{key:t,attrs:{label:e.modelTypeName,value:e.modelTypeId}})}))],1),i("el-form-item",{attrs:{prop:"fileNameId",label:"模板文件"}},[i("el-select",{attrs:{disabled:e.importTplFileListDisabled},model:{value:e.importForm.fileNameId,callback:function(t){e.$set(e.importForm,"fileNameId",t)},expression:"importForm.fileNameId"}},e._l(e.importTplFileList,function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1)],1),i("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{size:"small",type:"primary",disabled:e.importDisableState},on:{click:function(t){return t.stopPropagation(),e.confirmImport(t)}}},[e._v("确 认")])],1)],1),e.dialogUploadVisible?i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.isUploading,expression:"isUploading"}],attrs:{center:"",visible:e.dialogUploadVisible,width:"30%",title:"请确认模板内容无误，否则需要重新导入","close-on-click-modal":!1,"close-on-press-escape":!1,"element-loading-spinner":"el-icon-loading","element-loading-text":"文件导入中"},on:{"update:visible":function(t){e.dialogUploadVisible=t}}},[i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",disabled:e.isUploading},on:{click:function(t){e.dialogUploadVisible=!1}}},[e._v("取 消")]),i("el-upload",{staticClass:"upload",attrs:{action:"/cmca/fileModelConfig/webUploader",name:"file",accept:"Word"===e.category?".doc, .docx":".xlsx, .xls",data:e.importData,"show-file-list":!1,"before-upload":e.beforeUpload,"on-success":e.importSuccess,"on-error":e.importError}},[i("el-button",{attrs:{size:"small",type:"primary",disabled:e.isUploading}},[e._v("确 定")])],1)],1)]):e._e(),i("el-dialog",{attrs:{center:"",width:"30%",title:"提示","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.dialogSetDefaultVisible},on:{"update:visible":function(t){e.dialogSetDefaultVisible=t}}},[i("p",{staticClass:"demonstration"},[e._v("设为默认模板后，系统将根据此版本生成对应专题文件，您确定要把此版本设置为默认版本吗？")]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogSetDefaultVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.affirmSetDefault}},[e._v("确 认")])],1)])],1)},_=[],E=(i("aba3"),i("b5aa"),i("701f")),L=(i("25d7"),{name:"MainTabContent",data:function(){return{searchForm:{subjectId:"",modelTypeId:""},importForm:{subjectId:"",modelTypeId:"",fileNameId:""},subjectList:[],tplTypeList:[],tableData:null,tableLoading:!0,dialogFormVisible:!1,importTplTypeList:[],importTplTypeDisabled:!0,importTplFileList:[],importTplFileListDisabled:!0,importDisableState:!0,dialogUploadVisible:!1,isUploading:!1,dialogSetDefaultVisible:!1,setDefaultVersionScope:null,importData:{category:"",rowCodeVersionId:""}}},computed:Object(r["c"])("fileModelConfig",{tableHeight:function(e){return e.contentHeight-80},category:function(e){return e.category}}),watch:{"searchForm.subjectId":{handler:function(e,t){var i=this;t&&this.$api.fileModelConfig.getTplTypeList({category:this.category,subjectId:this.searchForm.subjectId}).then(function(e){e.modelType.unshift({modelTypeId:"all",modelTypeName:"全部"}),i.searchForm.modelTypeId="all",i.tplTypeList=e.modelType}).catch(function(e){i.$message.error(e)})}},importForm:{handler:function(e,t){e.subjectId&&e.modelTypeId&&e.fileNameId?this.importDisableState=!1:this.importDisableState=!0},deep:!0},"importForm.subjectId":{handler:function(e,t){var i=this;this.importTplTypeDisabled=!0,this.importForm.modelTypeId="",this.importTplTypeList=[],e&&this.$api.fileModelConfig.getTplTypeList({category:this.category,subjectId:this.importForm.subjectId}).then(function(e){i.importTplTypeDisabled=!1,e.modelType.length>0&&(i.importTplTypeList=e.modelType,i.importForm.modelTypeId=e.modelType[0].modelTypeId)}).catch(function(e){i.$message.error(e)})}},"importForm.modelTypeId":{handler:function(e,t){this.importTplFileListDisabled=!0,this.importForm.fileNameId="",this.importTplFileList=[],e&&this.loadTplFileList()}}},methods:Object(a["a"])({},Object(r["b"])("fileModelConfig",["updateSubjectId","ShowMainEdit","updateEditTplInfo"]),{resetForm:function(e){this.importTplTypeDisabled=!0,this.importTplFileListDisabled=!0,this.$refs[e].resetFields()},onSearch:function(){this.updateSubjectId(this.searchForm.subjectId),this.loadDetailTable()},loadDetailTable:function(){var e=this;this.tableLoading=!0;var t=JSON.parse(JSON.stringify(this.searchForm));t.category=this.category,this.$api.fileModelConfig.getDetailTableData(t).then(function(t){t.tableData.forEach(function(e,t){e.selected=e.defaultVersionId}),e.tableData=t.tableData,e.tableLoading=!1}).catch(function(t){e.$message.error(t)})},initTabContent:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(){var t,i,o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.fileModelConfig.getSubjectList().catch(function(e){o.$message.error(e)});case 2:return t=e.sent,this.subjectList=t.subjectList,this.searchForm.subjectId=4,this.updateSubjectId(this.searchForm.subjectId),e.next=8,this.$api.fileModelConfig.getTplTypeList({category:this.category,subjectId:this.searchForm.subjectId}).catch(function(e){o.$message.error(e)});case 8:i=e.sent,i.modelType.unshift({modelTypeId:"all",modelTypeName:"全部"}),this.tplTypeList=i.modelType,this.searchForm.modelTypeId="all",this.loadDetailTable();case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),switchVersion:function(e,t){var i=this,o=t?e.row.defaultVersionId:e.row.selected;this.$api.fileModelConfig.getTplVersionData({modelTypeId:this.searchForm.modelTypeId,rowCode:e.row.rowCode,versionId:o}).then(function(t){if(t.verisonData){var o=JSON.parse(JSON.stringify(t.verisonData));for(var n in o)o.hasOwnProperty(n)&&i.$set(i.tableData[e.$index],n,o[n])}}).catch(function(e){i.$message.error(e)})},eidtVersion:function(e){this.ShowMainEdit(),this.updateEditTplInfo(e.row)},deleteVersion:function(e){var t=this;e.row.isDefault?this.$alert("该模板为默认版本，不能删除","提示",{confirmButtonText:"确定"}):this.$confirm("您确认要删除该模板吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i={rowCode:e.row.rowCode,versionId:e.row.selected};t.$api.fileModelConfig.deleteTplVersion(i).then(function(i){if(i.deleteInfo){t.$message({type:"success",message:"删除成功!"});var o=t.tableData[e.$index].versionList;o.forEach(function(t,i){t.id===e.row.selected&&o.splice(i,1)}),e.row.selected=e.row.defaultVersionId,t.switchVersion(e,!0)}else t.$message({type:"error",message:"删除失败!"})}).catch(function(e){t.$message.error(e)})})},downloadTpl:function(e){var t=e.row.rowCode,i=e.row.selected,o=e.row.effectiveTime;window.open("".concat(this.$baseUrl,"fileModelConfig/downLoadModelFile?rowCode=").concat(t,"&versionId=").concat(i,"&category=").concat(this.category,"&audTrm=").concat(o.replace("-","")))},setDefault:function(e){e.row.isDefault||(this.dialogSetDefaultVisible=!0,this.setDefaultVersionScope=e)},affirmSetDefault:function(){var e=this,t={category:this.category,rowCode:this.setDefaultVersionScope.row.rowCode,versionId:this.setDefaultVersionScope.row.selected};this.$api.fileModelConfig.setDefaultTplVersion(t).then(function(t){e.dialogSetDefaultVisible=!1,e.switchVersion(e.setDefaultVersionScope)}).catch(function(t){e.$message.error(t)})},loadTplFileList:function(){var e=this;this.importForm.subjectId&&this.importForm.modelTypeId?this.$api.fileModelConfig.getTplFileList({category:this.category,subjectId:this.importForm.subjectId,modelTypeId:this.importForm.modelTypeId}).then(function(t){e.importTplFileListDisabled=!1,t.fileList.length>0&&(e.importTplFileList=t.fileList,e.importForm.fileNameId=t.fileList[0].id)}).catch(function(t){e.$message.error(t)}):this.importTplFileList=null},confirmImport:function(){var e=this;setTimeout(function(){e.dialogFormVisible=!1,e.dialogUploadVisible=!0,e.importData.rowCodeVersionId=e.importForm.fileNameId,e.importData.category=e.category},0)},beforeUpload:function(e){var t,i,o=this;switch(this.isUploading=!0,this.category){case"Word":t="application/msword"===e.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e.type,i="文本类模板只能导入.docx,.doc格式文件";break;case"Excel":t="application/vnd.ms-excel"===e.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type,i="报表类模板只能导入.xlsx,.xls格式文件";break}return t||this.$alert(i,"文件格式错误",{confirmButtonText:"确定",callback:function(e){o.isUploading=!1,o.dialogFormVisible=!0,o.dialogUploadVisible=!1}}),t},importSuccess:function(){var e=this;this.$message({type:"success",message:"导入成功!"}),setTimeout(function(){e.loadDetailTable(),e.isUploading=!1,e.dialogUploadVisible=!1},0)},importError:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t){var i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$alert("导入失败，请重新导入",{confirmButtonText:"确定",callback:function(e){i.isUploading=!1,i.dialogFormVisible=!0,i.dialogUploadVisible=!1}});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}),mounted:function(){this.initTabContent()}}),z=L,$=(i("b272"),Object(f["a"])(z,D,_,!1,null,"066dbcc8",null));$.options.__file="MainTabContent.vue";var V=$.exports,M={name:"MainTab",data:function(){return{activeTab:"Word",WordTabVisiable:!0,ExcelTabVisiable:!1,typeList:{textTypes:[{id:"all",name:"全部"}],statementTypes:[{id:"all",name:"全部"}]}}},computed:{tabHeight:function(){return this.$store.state.fileModelConfig.contentHeight}},components:{TabContent:V},methods:Object(a["a"])({},Object(r["b"])("fileModelConfig",["switchTab"]),{initTab:function(){var e;"Word"===this.activeTab?(this.WordTabVisiable=!0,this.ExcelTabVisiable=!1,e="文本类模板"):(this.ExcelTabVisiable=!0,this.WordTabVisiable=!1,e="报表类模板"),this.switchTab({tabName:e,category:this.activeTab})},changeTab:function(e){var t=e.$slots.label[0].elm.innerText.substring(1);this.WordTabVisiable=!0,this.ExcelTabVisiable=!0,this.switchTab({tabName:t,category:this.activeTab})}}),created:function(){this.initTab()}},q=M,P=(i("233e"),Object(f["a"])(q,S,O,!1,null,"0b75f178",null));P.options.__file="MainTab.vue";var U=P.exports,N=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main-edit-content"},[i("el-row",[i("el-col",{attrs:{span:14}},[i("el-form",{attrs:{inline:!0,size:"mini"}},[i("el-form-item",{attrs:{label:"模板版本"}},[i("el-select",{model:{value:e.selectedTplVersion,callback:function(t){e.selectedTplVersion=t},expression:"selectedTplVersion"}},e._l(e.tplVersionList,function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),"Excel"===e.category?i("el-form-item",{attrs:{label:"报表位置"}},[i("el-select",{model:{value:e.selectedExcelSheet,callback:function(t){e.selectedExcelSheet=t},expression:"selectedExcelSheet"}},e._l(e.sheetList,function(e,t){return i("el-option",{key:t,attrs:{label:e.sheetName,value:e.sheetOrder}})}))],1):e._e()],1)],1),i("el-col",{staticClass:"clearfix",attrs:{span:10}},[i("div",{staticClass:"float-r"},[i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.openUpdateDialog}},[e._v("更新配置")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.showPreFormDialog}},[e._v("预生成")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.exportConfigFile}},[e._v("导出配置文件")]),i("el-upload",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.isUploading,expression:"isUploading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"upload",attrs:{action:"/cmca/fileModelConfig/inputConf",accept:".sql",data:e.importData,"show-file-list":!1,"before-upload":e.uploading,"on-success":e.importSuccess,"on-error":e.importError}},[i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.chooseFile}},[e._v("导入配置文件")])],1)],1)])],1),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isTplPreviewLoading,expression:"isTplPreviewLoading"}],style:{height:e.mainHeight-80+"px"},attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"模板加载中"}},[i("div",{ref:"initPreview",staticClass:"review-content"})]),i("update-dialog",{ref:"editDialog",attrs:{"tpl-version":e.selectedTplVersion,"sheet-order":e.selectedExcelSheet}}),i("el-dialog",{attrs:{title:"预生成",visible:e.preDialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:e.preTplVisible?"90%":"30%"},on:{"update:visible":function(t){e.preDialogVisible=t}}},[e.preTplVisible?e._e():i("div",[i("el-form",{ref:"preForm",attrs:{size:"small",model:e.preForm,"label-width":"70px"}},[i("el-form-item",{attrs:{prop:"prvdId",label:"省 份"}},[i("el-select",{model:{value:e.preForm.prvdId,callback:function(t){e.$set(e.preForm,"prvdId",t)},expression:"preForm.prvdId"}},e._l(e.prvdList,function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),i("el-form-item",{attrs:{prop:"audTrm",label:"审计月"}},[i("el-select",{model:{value:e.preForm.audTrm,callback:function(t){e.$set(e.preForm,"audTrm",t)},expression:"preForm.audTrm"}},e._l(e.audTrmList,function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1)],1),i("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.preDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{size:"small",type:"primary",disabled:""==e.preForm.prvdId&&""==e.preForm.audTrm},on:{click:e.showPreTpl}},[e._v("确 认")])],1)],1),e.preTplVisible?i("pre-content",{attrs:{"tpl-version":e.selectedTplVersion,"sheet-order":e.selectedExcelSheet,prvd:e.preForm.prvdId,audTrm:e.preForm.audTrm}}):e._e()],1)],1)},H=[],R=(i("cd2e"),i("8c56")),A=i.n(R),B=(i("9f45"),i("f8d1")),W={namespaced:!0,state:{contentHeight:document.body.clientHeight-127,category:"",activeTab:"",subjectId:"",editContentVisible:!1,editTplInfo:null,updateDialogVisible:!1,editFormData:null,blockData:null,tplOperation:"",reuseEditData:null,sheetOrder:""},mutations:{heightResize:function(e,t){e.contentHeight=t-127},switchTab:function(e,t){e.activeTab=t.tabName,e.category=t.category},updateSubjectId:function(e,t){e.subjectId=t},ShowMainEdit:function(e){e.editContentVisible=!0},HideMainEdit:function(e){e.editContentVisible=!1},showUpdateDialogVisible:function(e){e.updateDialogVisible=!0},hideUpdateDialogVisible:function(e){e.updateDialogVisible=!1},initEditFormData:function(e,t){e.editFormData=t},updateEditTplInfo:function(e,t){e.editTplInfo=t},updateBlockData:function(e,t){e.blockData=t},updateSheetOrder:function(e,t){e.sheetOrder=t},updateTplOperation:function(e,t){e.tplOperation=t},setReuseEditData:function(e,t){e.reuseEditData=t}},actions:{heightResize:function(e,t){e.commit("heightResize",t)},switchTab:function(e,t){e.commit("switchTab",t)},updateSubjectId:function(e,t){e.commit("updateSubjectId",t)},initEditFormData:function(e,t){e.commit("initEditFormData",t)},ShowMainEdit:function(e){e.commit("ShowMainEdit")},HideMainEdit:function(e){e.commit("HideMainEdit")},showUpdateDialogVisible:function(e){e.commit("showUpdateDialogVisible")},hideUpdateDialogVisible:function(e){e.commit("hideUpdateDialogVisible")},updateEditTplInfo:function(e,t){e.commit("updateEditTplInfo",t)},updateSheetOrder:function(e,t){e.commit("updateSheetOrder",t)},updateBlockData:function(e,t){e.commit("updateBlockData",t)},updateTplOperation:function(e,t){e.commit("updateTplOperation",t)},initReuseEditData:function(e,t){e.commit("setReuseEditData",t)}}},J=W;B["default"].use(r["a"]);var G=new r["a"].Store({state:{roleId:"",xqglAuthStatus:"",sjbgysAuthStatus:"",rightControl:null},mutations:{initRoleId:function(e,t){e.roleId=t},initXqglAuthStatus:function(e,t){e.xqglAuthStatus=t},initSjbgysAuthStatus:function(e,t){e.sjbgysAuthStatus=t},initRightControl:function(e,t){e.rightControl=t}},actions:{initRoleId:function(e,t){e.commit("initRoleId",t)},initXqglAuthStatus:function(e,t){e.commit("initXqglAuthStatus",t)},initSjbgysAuthStatus:function(e,t){e.commit("initSjbgysAuthStatus",t)},initRightControl:function(e,t){e.commit("initRightControl",t)}},modules:{fileModelConfig:J}}),X=i("7f43"),Q=i.n(X),K=i("0427"),Y=i.n(K);Q.a.defaults.timeout=25e3,Q.a.defaults.baseURL="/cmca",Q.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",Q.a.interceptors.request.use(function(e){return e.headers["cache-control"]="no-cache",e.headers["Pragma"]="no-cache","post"===e.method&&(e.data=Y.a.stringify(e.data)),e},function(e){return Promise.reject(e)}),Q.a.interceptors.response.use(function(e){return e.data},function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="错误请求，状态码:400";break;case 401:e.message="未授权，请重新登录，状态码:401";break;case 403:e.message="拒绝访问，状态码:403";break;case 404:e.message="请求错误,未找到该资源，状态码:404";break;case 405:e.message="请求方法未允许，状态码:405";break;case 408:e.message="请求超时，状态码:408";break;case 500:e.message="服务器端出错，状态码:500";break;case 501:e.message="网络未实现，状态码:501";break;case 502:e.message="网络错误，状态码:502";break;case 503:e.message="服务不可用，状态码:503";break;case 504:e.message="网络超时，状态码:504";break;case 505:e.message="http版本不支持该请求，状态码:505";break;default:e.message="连接错误".concat(e.response.status)}else e.message="连接到服务器失败";return Promise.reject(e.message)});var Z=Q.a,ee={getSubjectList:function(e){return Z.get("/fileModelConfig/getSubject")},getTplTypeList:function(e){return Z.get("/fileModelConfig/getModeltype",{params:e})},getDetailTableData:function(e){return Z.get("/fileModelConfig/getTableData",{params:e})},getTplVersionData:function(e){return Z.get("/fileModelConfig/getVersionData",{params:e})},deleteTplVersion:function(e){return Z.get("/fileModelConfig/deleteByVersion",{params:e})},setDefaultTplVersion:function(e){return Z.get("/fileModelConfig/setDefaultVersion",{params:e})},getTplFileList:function(e){return Z.get("/fileModelConfig/getFileName",{params:e})},getSheetList:function(e){return Z.get("/fileModelConfig/getExcelSheetName",{params:e})},exportConfigFile:function(e){return Z.get("/fileModelConfig/outPutConf",{params:e})},getPreviewTplFile:function(e){return Z.get("/fileModelConfig/getModelTxtNoHandle",{params:e})},getEditPreviewFile:function(e){return Z.get("/fileModelConfig/getModelTxtHandleOne",{params:e})},getReusePreviewFile:function(e){return Z.get("/fileModelConfig/getModelTxtHandleTwo",{params:e})},getEditFormData:function(e){return Z.get("/fileModelConfig/getEditInfoData",{params:e})},postEditData:function(e){return Z.post("/fileModelConfig/updateFileModel",e)},getPrvdAndAudTrm:function(e){return Z.get("/fileModelConfig/getPreGenAudTrmAndPrvd",{params:e})},getPreFileState:function(e){return Z.get("/fileModelConfig/preGenFile",{params:e})},getPreviewPreFile:function(e){return Z.get("/fileModelConfig/getPreGenFile",{params:e})},releaseVersion:function(e){return Z.get("/fileModelConfig/setFullVersion",{params:e})}},te=function(){return Z.get("/bgxz/index")},ie=function(){return Z.get("/xqgl/getAuthorityAttr")},oe=function(){return Z.get("/sjbgys/getAuthStatus")},ne=function(){return Z.get("/home/getRight")},ae={getLoginRole:te,getXqglControl:ie,getSjbgysControl:oe,getRightControl:ne,fileModelConfig:ee};i("bf98"),i("7dd0"),i("5414");B["default"].use(A.a),B["default"].prototype.$baseUrl="/cmca/",B["default"].prototype.$api=ae;var re=function(e){var t=B["default"].extend(e),i=(new t).$mount();return i.$el},se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"edit-dialog",attrs:{title:"更新模板",visible:e.updateDialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.closeTip},on:{open:e.openUpdateDialog}},[i("el-row",{style:{height:e.mainHeight-90+"px"}},[i("el-col",{staticStyle:{height:"100%"},attrs:{span:e.isOperation?12:24}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isUpdateTplLoading,expression:"isUpdateTplLoading"}],ref:"editTplPreview",staticClass:"review-content",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"模板加载中"}})]),e.isOperation?i("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.operationlLoading,expression:"operationlLoading"}],staticStyle:{height:"100%"},attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"数据加载中",span:e.isOperation?12:0}},["edit"===e.operation&&"Word"===e.category?i("edit-form",{ref:"editForm",attrs:{"tpl-version":e.tplVersion,"form-model":e.wordEditForm}},[i("form-item-title",{attrs:{iconColor:"#FE9455"}},[e._v("控制段落间合并")]),i("el-form-item",{attrs:{prop:"mergeLast"}},[i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.wordEditForm.mergeLast,callback:function(t){e.$set(e.wordEditForm,"mergeLast",t)},expression:"wordEditForm.mergeLast"}},[e._v("与上一段落合并")])],1),i("form-item-title",{attrs:{iconColor:"#AD54FF"}},[e._v("控制该段落取值逻辑")]),i("el-form-item",{attrs:{prop:"querySql",label:"SQL逻辑"}},[i("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.wordEditForm.querySql,callback:function(t){e.$set(e.wordEditForm,"querySql",t)},expression:"wordEditForm.querySql"}})],1),i("form-item-title",[e._v("控制该段落是否显示")]),i("el-form-item",{attrs:{prop:"showType",label:"显示类型"}},[i("el-select",{attrs:{placeholder:"模板类型"},model:{value:e.wordEditForm.showType,callback:function(t){e.$set(e.wordEditForm,"showType",t)},expression:"wordEditForm.showType"}},e._l(e.showTypeList,function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),i("transition",{attrs:{name:"el-zoom-in-top"}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1===e.wordEditForm.showType,expression:"wordEditForm.showType === 1"}],attrs:{prop:"showSql",label:"SQL逻辑"}},[i("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.wordEditForm.showSql,callback:function(t){e.$set(e.wordEditForm,"showSql",t)},expression:"wordEditForm.showSql"}})],1)],1)],1):e._e(),"edit"===e.operation&&"Excel"===e.category?i("edit-form",{ref:"editForm",attrs:{"tpl-version":e.tplVersion,"form-model":e.excelEditForm}},[i("form-item-title",{attrs:{iconColor:"#FE9455"}},[e._v("控制报表类型")]),i("el-row",[i("el-col",{attrs:{span:10}},[9===e.subjectId?i("el-form-item",{attrs:{prop:"audTrmOption",label:"审计月参数"}},[i("el-select",{model:{value:e.excelEditForm.audTrmOption,callback:function(t){e.$set(e.excelEditForm,"audTrmOption",t)},expression:"excelEditForm.audTrmOption"}},e._l(e.audTrmOptionList,function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1):e._e()],1),i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{prop:"isWideTb"}},[i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.excelEditForm.isWideTb,callback:function(t){e.$set(e.excelEditForm,"isWideTb",t)},expression:"excelEditForm.isWideTb"}},[e._v("循环多月数据")])],1)],1)],1),i("transition",{attrs:{name:"el-zoom-in-top"}},[e.excelEditForm.isWideTb?i("el-row",[i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{prop:"wideTbMonth",label:"起始月"}},[i("el-input",{model:{value:e.excelEditForm.wideTbMonth,callback:function(t){e.$set(e.excelEditForm,"wideTbMonth",t)},expression:"excelEditForm.wideTbMonth"}})],1)],1),i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{prop:"wideTbCol",label:"公共开始列"}},[i("el-input",{model:{value:e.excelEditForm.wideTbCol,callback:function(t){e.$set(e.excelEditForm,"wideTbCol",t)},expression:"excelEditForm.wideTbCol"}})],1)],1)],1):e._e()],1),i("form-item-title",{attrs:{iconColor:"#AD54FF"}},[e._v("控制报表取数逻辑")]),i("el-form-item",{attrs:{prop:"querySql",label:"SQL编辑"}},[i("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.excelEditForm.querySql,callback:function(t){e.$set(e.excelEditForm,"querySql",t)},expression:"excelEditForm.querySql"}})],1)],1):e._e(),"reuse"===e.operation?i("edit-reuse"):e._e()],1):e._e()],1)],1)},le=[],ce=i("c97d"),de=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-item-title"},[i("h3",[i("span",{staticClass:"title-icon",style:{backgroundColor:e.iconColor}}),e._t("default",[e._v("表单项标题")])],2)])},ue=[],pe={name:"formItemTitle",props:{iconColor:{default:"#268BFF"}}},fe=pe,me=(i("6f88"),Object(f["a"])(fe,de,ue,!1,null,"0d6a642e",null));me.options.__file="VFormTitle.vue";var he=me.exports,ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"reuse-container"},[i("el-form",{attrs:{size:"mini",inline:!0,model:e.reuseForm,"label-width":"70px"}},[i("el-row",[i("el-col",{attrs:{span:"Excel"===e.category?8:10}},[i("el-form-item",{attrs:{label:"模板版本"}},[i("el-select",{model:{value:e.reuseForm.versionId,callback:function(t){e.$set(e.reuseForm,"versionId",t)},expression:"reuseForm.versionId"}},e._l(e.tplVersionList,function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1)],1),"Excel"===e.category?i("el-col",{attrs:{span:"Excel"===e.category?8:0}},["Excel"===e.category?i("el-form-item",{attrs:{label:"报表位置"}},[i("el-select",{model:{value:e.reuseForm.sheetOrder,callback:function(t){e.$set(e.reuseForm,"sheetOrder",t)},expression:"reuseForm.sheetOrder"}},e._l(e.sheetList,function(e,t){return i("el-option",{key:t,attrs:{label:e.sheetName,value:e.sheetOrder}})}))],1):e._e()],1):e._e(),i("el-col",{attrs:{span:"Excel"===e.category?8:10}},[i("el-form-item",{attrs:{label:"段落位置"}},[i("el-select",{model:{value:e.reuseForm.blockOrder,callback:function(t){e.$set(e.reuseForm,"blockOrder",t)},expression:"reuseForm.blockOrder"}},e._l(e.blockList,function(e,t){return i("el-option",{key:t,attrs:{label:e.blockName,value:e.blockOrder}})}))],1)],1)],1)],1),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"reusePrview",staticClass:"review-content",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"模板加载中"}})],1)},be=[],ve={name:"ReuseContent",data:function(){return{reuseForm:{versionId:"",sheetOrder:"",blockOrder:""},sheetList:[{sheetOrder:1,sheetName:"test"}],blockList:[],isLoading:!1}},computed:Object(r["c"])("fileModelConfig",{category:function(e){return e.category},rowCode:function(e){return e.editTplInfo.rowCode},tplVersionList:function(e){return e.editTplInfo.versionList},defaultTplVersion:function(e){return e.editTplInfo.defaultVersionId},blockData:function(e){return e.blockData}}),watch:{"reuseForm.versionId":function(e,t){var i=this;"Excel"===this.category?this.$api.fileModelConfig.getSheetList({rowCode:this.rowCode,versionId:this.reuseForm.versionId}).then(function(e){i.sheetList=e.sheetNameData,i.reuseForm.sheetOrder=e.sheetNameData[0].sheetOrder,i.loadReuseTplPreview()}):this.loadReuseTplPreview()},"reuseForm.sheetOrder":function(e,t){t&&this.loadReuseTplPreview()},"reuseForm.blockOrder":function(e,t){var i=this;this.$confirm("确定复制该段落配置？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=JSON.stringify(JSON.parse(i.reuseForm));e.category=i.category,e.rowCode=i.rowCode,i.$api.fileModelConfig.getEditFormData(e).then(function(e){var t=i;function o(){return n.apply(this,arguments)}function n(){return n=Object(E["a"])(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.updateTplOperation("edit");case 2:t.initReuseEditData(e.editInfoData);case 3:case"end":return i.stop()}},i,this)})),n.apply(this,arguments)}o()}).catch(function(e){i.$message.error(e)})}).catch(function(){})},blockData:{handler:function(e,t){e.blockOrder!==t.blockOrder&&(this.reuseForm.versionId=this.defaultTplVersion)},deep:!0}},methods:Object(a["a"])({},Object(r["b"])("fileModelConfig",["initReuseEditData","updateTplOperation"]),{loadReuseTplPreview:function(){var e=this;this.isLoading=!0,this.$refs.reusePrview.innerHTML="",this.$nextTick(function(){e.$api.fileModelConfig.getReusePreviewFile({versionId:e.reuseForm.versionId,sheetOrder:e.reuseForm.sheetOrder,rowCode:e.rowCode,category:e.category}).then(function(t){var i;e.$refs.reusePrview.scrollTop=0,i=t.txtHandleTwo.txt?t.txtHandleTwo.txt:'<p style="text-align:center">暂无数据</p>';var o=re({template:"".concat(i),data:function(){return{style:t.txtHandleTwo.style}}});e.$refs.reusePrview.appendChild(o),e.reuseForm.blockOrder="",e.blockList=t.txtHandleTwo.blockOrder,e.isLoading=!1}).catch(function(t){e.$message.error(t)})})}}),created:function(){this.reuseForm.versionId=this.defaultTplVersion}},we=ve,ye=(i("e9a3"),Object(f["a"])(we,ge,be,!1,null,"24eb8ef6",null));ye.options.__file="MainEditUpdateDialogReuse.vue";var Te=ye.exports,Ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"editFormContainer",staticClass:"edit-form-container"},[i("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"120px",size:"mini"}},[e._t("default"),i("el-form-item",{staticStyle:{"text-align":"center"},attrs:{size:"large"}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveEdit}},[e._v("保存")]),i("el-button",{attrs:{size:"small"},on:{click:e.clearForm}},[e._v("清除")])],1)],2)],1)},xe=[],ke={name:"EditForm",data:function(){return{isLoading:!1,editForm:this.formModel}},props:{tplVersion:{required:!0},formModel:{type:Object,required:!0}},computed:Object(a["a"])({},Object(r["c"])("fileModelConfig",{category:function(e){return e.category},initEditData:function(e){return e.editFormData},rowCode:function(e){return e.editTplInfo.rowCode},blockData:function(e){return e.blockData},sheetOrder:function(e){return e.sheetOrder}}),{newEditDataString:function(){return JSON.stringify(this.editForm)}}),methods:Object(a["a"])({},Object(r["b"])("fileModelConfig",["initEditFormData"]),{resetForm:function(e){this.$refs[e].resetFields()},saveEdit:function(){var e=this;if(this.initEditData!=this.newEditDataString){var t=JSON.parse(JSON.stringify(this.editForm));t.rowCode=this.rowCode,t.blockOrder=this.blockData.blockOrder,t.sheetOrder=this.sheetOrder,t.category=this.category,t.versionId=this.tplVersion,this.$api.fileModelConfig.postEditData(t).then(function(t){e.$message({message:"已保存",type:"success"}),e.initEditFormData(e.newEditDataString)}).catch(function(t){e.$message.error(t)})}else this.$message("表单内容未做更改，不需重复提交")},clearForm:function(){var e=this;this.$confirm("此操作不可恢复，确认清除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.resetForm("editForm")}).catch(function(){})}}),mounted:function(){var e=this;this.$nextTick(function(){e.$refs.editFormContainer.scrollTop=0})}},je=ke,Fe=(i("e945"),Object(f["a"])(je,Ce,xe,!1,null,"b957f6f0",null));Fe.options.__file="MainEditUpdateDialogForm.vue";var Ie=Fe.exports,Se={name:"MainEditUpdateDialog",data:function(){return{isUpdateTplLoading:!0,isOperation:!1,operationlLoading:!0,wordEditForm:{querySql:"",showSql:"",mergeLast:0,showType:0},showTypeList:[{id:0,name:"0-一律显示"},{id:1,name:"1-SQL逻辑控制显示"}],excelEditForm:{audTrmOption:"",isWideTb:0,wideTbMonth:"",wideTbCol:"",querySql:""},audTrmOptionList:[{id:-1,name:"-1"},{id:-2,name:"-2"},{id:-3,name:"-3"}]}},computed:Object(a["a"])({},Object(r["c"])("fileModelConfig",{mainHeight:function(e){return e.contentHeight},subjectId:function(e){return e.subjectId},category:function(e){return e.category},updateDialogVisible:function(e){return e.updateDialogVisible},rowCode:function(e){return e.editTplInfo.rowCode},operation:function(e){return e.tplOperation},initEditData:function(e){return e.editFormData},blockData:function(e){return e.blockData},reuseEditData:function(e){return e.reuseEditData}}),{editFormModel:function(){return"Word"===this.category?this.wordEditForm:this.excelEditForm},newEditDataString:function(){return JSON.stringify(this.editFormModel)}}),props:{tplVersion:{required:!0},sheetOrder:{required:!0}},watch:{updateDialogVisible:function(e,t){e||(this.$refs.editTplPreview.innerHTML="",this.isOperation=!1,this.initEditFormData(null))},blockData:{handler:function(e,t){this.initEditForm()},deep:!0},reuseEditData:{handler:function(e,t){for(var i in this.editFormModel)this.editFormModel.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(this.editFormModel[i]=e[i])},deep:!0}},components:{FormItemTitle:he,EditForm:Ie,EditReuse:Te},methods:Object(a["a"])({},Object(r["b"])("fileModelConfig",["hideUpdateDialogVisible","updateTplOperation","initEditFormData","updateBlockData"]),{editSaveTip:function(){return this.$confirm("配置内容未保存，是否放弃","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})},loadEditPreviewFile:function(){var e=this;this.$refs.editTplPreview.scrollTop=0,this.$api.fileModelConfig.getEditPreviewFile({versionId:this.tplVersion,rowCode:this.rowCode,category:this.category,sheetOrder:this.sheetOrder}).then(function(t){e.isUpdateTplLoading=!1;var i=e,o=re({template:"".concat(t.txtHandleOne.txt),data:function(){return{style:t.txtHandleOne.style,blockInfo:null}},methods:{switchBlock:function(e,t){var o=this;this.blockInfo={blockOrder:e[0],sheetOrder:e[1]},i.isOperation?i.blockData.blockOrder!==e[0]?i.initEditData!==i.newEditDataString?i.editSaveTip().then(function(){i.updateBlockData(o.blockInfo),t!==i.operation&&i.updateTplOperation(t)}).catch(function(){}):(i.updateBlockData(this.blockInfo),t!==i.operation&&i.updateTplOperation(t)):t!==i.operation&&i.updateTplOperation(t):(i.isOperation=!0,i.updateBlockData(this.blockInfo),i.updateTplOperation(t))},edit:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.switchBlock(t,"edit")},reuse:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.switchBlock(t,"reuse")}}});e.$refs.editTplPreview.innerHTML="",e.$refs.editTplPreview.appendChild(o)}).catch(function(t){e.$message.error(t)})},openUpdateDialog:function(){var e=this;this.isUpdateTplLoading=!0,this.isOperation=!1,this.$nextTick(function(){e.loadEditPreviewFile()})},closeTip:function(){var e=Object(E["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=!0,!this.isOperation||"edit"!==this.operation){e.next=6;break}if(this.initEditData===this.newEditDataString){e.next=6;break}return e.next=5,this.editSaveTip().then(function(){return!0}).catch(function(){return!1});case 5:i=e.sent;case 6:i&&this.hideUpdateDialogVisible();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),initEditForm:function(){var e=this;this.operationlLoading=!0,this.$api.fileModelConfig.getEditFormData({category:this.category,rowCode:this.rowCode,versionId:this.tplVersion,blockOrder:this.blockData.blockOrder,sheetOrder:this.sheetOrder}).then(function(t){var i;i=t.editInfoData?t.editInfoData:Object(ce["a"])({querySql:"",showSql:"",mergeLast:0,showType:0,audTrmOption:"",isWideTb:0,wideTbMonth:"",wideTbCol:""},"querySql","");var o={};if(e.editFormModel){if("edit"===e.operation){for(var n in e.editFormModel)e.editFormModel.hasOwnProperty(n)&&i.hasOwnProperty(n)&&(e.editFormModel[n]=i[n]);o=e.editFormModel}else for(var a in e.editFormModel)e.editFormModel.hasOwnProperty(a)&&i.hasOwnProperty(a)&&(o[a]=i[a]);e.initEditFormData(JSON.stringify(o)),e.operationlLoading=!1}}).catch(function(t){e.$message.error(t)})}})},Oe=Se,De=Object(f["a"])(Oe,se,le,!1,null,null,null);De.options.__file="MainEditUpdateDialog.vue";var _e=De.exports,Ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.releaseLoading,expression:"releaseLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"main-pre-content",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"发布正式版本"}},[i("el-row",{staticStyle:{"margin-bottom":"10px"}},[i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6,offset:18}},[i("el-button",{attrs:{type:"primary",size:"mini",plain:"",disabled:e.disabledState},on:{click:e.releaseVersion}},[e._v("发布正式版本")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:e.downLoad}},[e._v("下载")])],1)],1),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"preTplPreview",staticClass:"review-content",style:{height:e.mainHeight-120+"px"},attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"模板加载中"}})],1)},Le=[],ze={name:"MainEditPreGenerated",data:function(){return{isLoading:!0,disabledState:!1,releaseLoading:!1}},props:{tplVersion:{required:!0},sheetOrder:{required:!0},prvd:{required:!0},audTrm:{required:!0}},computed:Object(a["a"])({},Object(r["c"])("fileModelConfig",{mainHeight:function(e){return e.contentHeight},category:function(e){return e.category},rowCode:function(e){return e.editTplInfo.rowCode}})),methods:{loadPreTpl:function(){var e=this;this.$refs.preTplPreview.scrollTop=0,this.$api.fileModelConfig.getPreviewPreFile({rowCode:this.rowCode,category:this.category,versionId:this.tplVersion,sheetOrder:this.sheetOrder}).then(function(t){e.isLoading=!1;var i=re({template:"".concat(t.preGenFile.txt),data:function(){return{style:t.preGenFile.style}}});e.$refs.preTplPreview.innerHTML="",e.$refs.preTplPreview.appendChild(i)}).catch(function(t){e.$message.error(t)})},releaseVersion:function(){var e=this;this.releaseLoading=!0,this.$api.fileModelConfig.releaseVersion({rowCode:this.rowCode,category:this.category,versionId:this.tplVersion}).then(function(t){e.releaseLoading=!1,t.setFullInfo?(e.disabledState=!0,e.$message({type:"success",message:"正式版本发布成功"})):e.$alert("模板未完成编辑，不能发布正式版本","提示",{confirmButtonText:"确定"})}).catch(function(t){e.$message.error(t)})},downLoad:function(){window.open("".concat(this.$baseUrl,"fileModelConfig/downPreGenFile?rowCode=").concat(this.rowCode,"&category=").concat(this.category,"&versionId=").concat(this.tplVersion,"&prvdId=").concat(this.prvd,"&audTrm=").concat(this.audTrm))}},mounted:function(){this.loadPreTpl()}},$e=ze,Ve=Object(f["a"])($e,Ee,Le,!1,null,null,null);Ve.options.__file="MainEditPreGenerated.vue";var Me=Ve.exports,qe={name:"MainEdit",data:function(){return{selectedTplVersion:"",selectedExcelSheet:"",sheetList:[],isUploading:!1,isTplPreviewLoading:!0,preDialogVisible:!1,importData:{},preTplVisible:!1,preForm:{prvdId:"",audTrm:""},prvdList:[],audTrmList:[]}},computed:Object(r["c"])("fileModelConfig",{mainHeight:function(e){return e.contentHeight},subjectId:function(e){return e.subjectId},rowCode:function(e){return e.editTplInfo.rowCode},tplVersionList:function(e){return e.editTplInfo.versionList},editTplList:function(e){return e.editTplInfo},category:function(e){return e.category}}),watch:{selectedTplVersion:function(e,t){var i=this;"Excel"===this.category?this.$api.fileModelConfig.getSheetList({rowCode:this.rowCode,versionId:this.selectedTplVersion}).then(function(e){i.sheetList=e.sheetNameData,i.selectedExcelSheet=e.sheetNameData[0].sheetOrder,i.loadPreviewTplFile()}):this.loadPreviewTplFile()},selectedExcelSheet:function(e,t){this.updateSheetOrder(e),(0===t||t)&&this.loadPreviewTplFile()}},components:{UpdateDialog:_e,PreContent:Me},methods:Object(a["a"])({},Object(r["b"])("fileModelConfig",["updateSheetOrder","showUpdateDialogVisible"]),{loadPreviewTplFile:function(){var e=this;this.isTplPreviewLoading=!0,this.$refs.initPreview.innerHTML="",this.$nextTick(function(){e.$api.fileModelConfig.getPreviewTplFile({versionId:e.selectedTplVersion,sheetOrder:e.selectedExcelSheet,rowCode:e.rowCode,category:e.category}).then(function(t){e.$refs.initPreview.scrollTop=0;var i=re({template:"".concat(t.txtNoHandle.txt),data:function(){return{style:t.txtNoHandle.style}}});e.$refs.initPreview.appendChild(i),e.isTplPreviewLoading=!1}).catch(function(t){e.$message.error(t)})})},openUpdateDialog:function(){this.showUpdateDialogVisible()},showPreFormDialog:function(){var e=this;this.preDialogVisible=!0,this.preTplVisible=!1,this.$api.fileModelConfig.getPrvdAndAudTrm({subjectId:this.subjectId,category:this.category}).then(function(t){e.prvdList=t.preGenPrvd,e.audTrmList=t.preGenAudTrm,t.preGenPrvd.length>0&&(e.preForm.prvdId=t.preGenPrvd[0].id||""),t.preGenAudTrm.length>0&&(e.preForm.audTrm=t.preGenAudTrm[0].id||"")}).catch(function(t){e.$message.error(t)})},showPreTpl:function(){var e=this,t=JSON.parse(JSON.stringify(this.preForm));t.subjectId=this.subjectId,t.sheetOrder=this.selectedExcelSheet,t.versionId=this.selectedTplVersion,t.category=this.category,t.rowCode=this.rowCode,this.$api.fileModelConfig.getPreFileState(t).then(function(t){t?e.preTplVisible=!0:e.$message("预生成文件失败")}).catch(function(t){e.$message.error(t)})},exportConfigFile:function(){window.open("".concat(this.$baseUrl,"/fileModelConfig/outputConf?rowCode=").concat(this.rowCode,"&versionId=").concat(this.selectedTplVersion,"&category=").concat(this.category))},chooseFile:function(){this.importData={rowCode:this.rowCode,versionId:this.selectedTplVersion,category:this.category}},uploading:function(){this.isUploading=!0},importSuccess:function(e,t,i){var o=this;switch(e){case 1:this.$message({type:"success",message:"导入成功!"});break;case 2:this.$alert("导入文件不一致","导入失败",{confirmButtonText:"确定",callback:function(){o.isUploading=!1}});break;default:this.$alert("请检查配置文件内容","导入失败",{confirmButtonText:"确定",callback:function(){o.isUploading=!1}});break}this.isUploading=!1},importError:function(){this.$message({type:"error",message:"导入失败，请重新导入!"}),this.isUploading=!1}}),mounted:function(){var e=this;this.$nextTick(function(){e.selectedTplVersion=e.editTplList.selected})}},Pe=qe,Ue=(i("70a0"),Object(f["a"])(Pe,N,H,!1,null,"93d4d29c",null));Ue.options.__file="MainEdit.vue";var Ne=Ue.exports,He={name:"App",data:function(){return{}},computed:Object(r["c"])("fileModelConfig",{activeTabName:function(e){return e.activeTab},editContentVisible:function(e){return e.editContentVisible}}),components:{TheLayout:I,MainTab:U,MainEdit:Ne},methods:Object(a["a"])({},Object(r["b"])("fileModelConfig",["HideMainEdit","heightResize"]),{hideEditContent:function(){this.HideMainEdit()}}),mounted:function(){this.heightResize(document.body.clientHeight);var e=this;window.onresize=function(){e.heightResize(document.body.clientHeight)}}},Re=He,Ae=(i("d233"),Object(f["a"])(Re,o,n,!1,null,"6fb69db6",null));Ae.options.__file="App.vue";var Be=Ae.exports;new B["default"]({store:G,render:function(e){return e(Be)}}).$mount("#app")}});
//# sourceMappingURL=fileModelConfig.d3c4b5b4.js.map